function ct({state:w,statePath:h,selector:_,plugins:A,external_plugins:v,toolbar:F,language:C="en",language_url:k=null,directionality:x="ltr",customButtons:g=null,customButtonsLabel:E="Custom buttons",height:O=null,max_height:z=0,min_height:T=100,width:M=null,max_width:B=0,min_width:P=400,resize:S=!1,skin:$="oxide",content_css:D="default",toolbar_sticky:W=!0,toolbar_sticky_offset:tt=64,toolbar_mode:et="sliding",toolbar_location:it="auto",inline:nt=!1,toolbar_persist:ot=!1,menubar:G=!1,font_size_formats:I="",fontfamily:K="",relative_urls:V=!0,image_list:j=null,image_advtab:H=!1,image_description:J=!1,image_class_list:L=null,images_upload_url:U=null,images_upload_base_path:b=null,remove_script_host:q=!0,convert_urls:N=!0,custom_configs:Q={},setup:y=null,disabled:st=!1,locale:at="en",license_key:R="gpl",placeholder:rt=null,removeImagesEventCallback:r=null}){let f=window.filamentTinyEditors||{};return{id:null,state:w,statePath:h,selector:_,language:C,language_url:k,directionality:x,customButtons:g,customButtonsLabel:E,height:O,max_height:z,min_height:T,width:M,max_width:B,min_width:P,resize:S,skin:$,content_css:D,plugins:A,external_plugins:v,toolbar:F,toolbar_sticky:W,menubar:G,relative_urls:V,remove_script_host:q,convert_urls:N,font_size_formats:I,fontfamily:K,setup:y,image_list:j,image_advtab:H,image_description:J,image_class_list:L,images_upload_url:U,images_upload_base_path:b,license_key:R,custom_configs:Q,updatedAt:Date.now(),disabled:st,locale:at,placeholder:rt,removeImagesEventCallback:r,init(){this.delete(),this.initEditor(w.initialValue),window.filamentTinyEditors=f,this.$watch("state",(o,l)=>{o==="<p></p>"&&o!==this.editor()?.getContent()&&(this.editor()&&this.editor().destroy(),this.initEditor(o)),this.editor()?.container&&o!==this.editor()?.getContent()&&(this.updateEditorContent(o||""),this.putCursorToEnd())})},editor(){return tinymce.get(f[this.statePath])},initEditor(o){let l=this,X=this.$wire,Y=K||"Arial=arial,helvetica,sans-serif; Courier New=courier new,courier,monospace; AkrutiKndPadmini=Akpdmi-n",lt={selector:_,language:C,language_url:k,directionality:x,statusbar:!1,promotion:!1,height:O,max_height:z,min_height:T,width:M,max_width:B,min_width:P,resize:S,skin:$,content_css:D,plugins:A,external_plugins:v,toolbar:F,toolbar_sticky:W,toolbar_sticky_offset:tt,toolbar_mode:et,toolbar_location:it,inline:nt,toolbar_persist:ot,menubar:G,menu:{file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},font_size_formats:I||"8pt 10pt 12pt 14pt 16pt 18pt 24pt 36pt 48pt",fontfamily:Y,font_family_formats:Y,relative_urls:V,remove_script_host:q,convert_urls:N,image_list:j,image_advtab:H,image_description:J,image_class_list:L,images_upload_url:U,images_upload_base_path:b,license_key:R,...Q,setup:function(t){window.tinySettingsCopy||(window.tinySettingsCopy=[]),t.settings&&!window.tinySettingsCopy.some(i=>i.id===t.settings.id)&&window.tinySettingsCopy.push(t.settings),t.on("blur",function(i){l.updatedAt=Date.now(),l.state=t.getContent()}),t.on("change",function(i){l.updatedAt=Date.now(),l.state=t.getContent()}),t.on("init",function(i){f[l.statePath]=t.id,o!=null&&t.setContent(o)}),t.on("OpenWindow",function(i){let n=i.target.container.closest(".fi-modal");n&&n.setAttribute("x-trap.noscroll","false")}),t.on("CloseWindow",function(i){let n=i.target.container.closest(".fi-modal");n&&n.setAttribute("x-trap.noscroll","isOpen")}),g&&t.ui.registry.addSplitButton("customButtons",{text:E,onAction:()=>t.insertContent(""),onItemAction:(i,n)=>t.insertContent(n),fetch:i=>{let n=Object.entries(g).map(([d,c])=>({type:"choiceitem",text:d,value:c}));i(n)}}),typeof y=="function"&&y(t)},images_upload_handler:(t,i)=>new Promise((n,d)=>{if(!t.blob())return;let c=(e,u)=>e?e.replace(/\/$/,"")+"/"+u.replace(/^\//,""):u,Z=()=>{X.getFormComponentFileAttachmentUrl(h).then(e=>{if(!e){d("Image upload failed");return}n(c(b,e))})},a=()=>{},m=e=>{i(e.detail.progress)},s=t.blob();s.name||(s.name="tempFile"),X.upload(`componentFileAttachments.${h}`,s,Z,a,m)}),init_instance_callback:function(t){var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n=r&&typeof r=="function";if(n){var d=new i(function(c,Z){var a=[];c.forEach(function(s){Array.from(s.addedNodes).forEach(function(e){if(e.nodeName==="IMG"&&e.className!=="mce-clonedresizable"){if(a.indexOf(e.src)>=0)return;a.push(e.getAttribute("src"));return}var u=e.getElementsByTagName("img");Array.from(u).forEach(function(p){a.indexOf(p.src)>=0||a.push(p.getAttribute("src"))})})});var m=[];c.forEach(function(s){Array.from(s.removedNodes).forEach(function(e){if(e.nodeName==="IMG"&&e.className!=="mce-clonedresizable"){if(m.indexOf(e.src)>=0)return;m.push(e.getAttribute("src"));return}if(e.nodeType===1){var u=e.getElementsByTagName("img");Array.from(u).forEach(function(p){a.indexOf(p.src)>=0||a.push(p.getAttribute("src"))})}})}),m.forEach(function(s){a.indexOf(s)>=0||r&&typeof r=="function"&&r(s)})});d.observe(t.getBody(),{childList:!0,subtree:!0})}},automatic_uploads:!0};tinymce.init(lt)},updateEditorContent(o){this.editor().setContent(o)},putCursorToEnd(){this.editor().selection.select(this.editor().getBody(),!0),this.editor().selection.collapse(!1)},delete(){f[this.statePath]&&(this.editor().destroy(),delete f[this.statePath])}}}export{ct as default};
